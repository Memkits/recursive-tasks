{:definitions {"recursive-tasks.comp.task-list/render" ["defn" "render" ["tasks" "path"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" "style-list"]] ["div" ["{}"] ["->>" "tasks" ["map-indexed" ["fn" ["idx" "task"] ["let" [["child-path" ["conj" "path" "idx"]]] ["[]" [":id" "task"] ["div" ["{}" [":style" ["merge" "ui/row" ["{}" [":padding" "|0px 8px"] [":align-items" "|center"]]]]] ["comp-task" "task" "child-path"] ["comp-space" "|8px" "nil"] ["if" ["not" [":done?" "task"]] ["comp-task-list" [":sub-tasks" "task"] ["conj" "child-path" ":sub-tasks"]]]]]]]]]] ["div" ["{}" [":style" "style-toolbar"]] ["div" ["{}" [":style" "widget/icon"] [":attrs" ["{}" [":class-name" "|ion-ios-plus-empty"]]] [":event" ["{}" [":click" ["on-add" "path"]]]]]]]]]], "recursive-tasks.style.color/purple" ["def" "purple" "|#ab8fc0"], "recursive-tasks.comp.task/style-done" ["def" "style-done" ["{}" [":color" "color/purple"]]], "recursive-tasks.style.widget/icon" ["def" "icon" ["let" [["size" "24"]] ["{}" [":cursor" "|pointer"] [":font-size" "|16px"] [":color" ["hsl" "0" "0" "60"]]]]], "recursive-tasks.updater.core/updater" ["defn" "updater" ["store" "op" "op-data" "op-id"] ["let" [["handler" ["case" "op" [":add-task" "add-task"] [":update-task" "update-task"] [":remove-task" "remove-task"] [":toggle-task" "toggle-task"] [":move-up" "move-up"] [":move-down" "move-down"] "default-handler"]]] ["handler" "store" "op-data" "op-id"]]], "recursive-tasks.comp.task/render" ["defn" "render" ["task" "path"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["merge" "ui/row" "style-task"]]] ["div" ["{}" [":style" ["merge" "style-toggler" ["if" [":done?" "task"] "style-done"]]] [":event" ["{}" [":click" ["on-toggle" "path"]]]] [":attrs" ["{}" [":class-name" "|ion-android-done"]]]]] ["comp-space" "|8px" "nil"] ["input" ["{}" [":style" ["merge" ["merge" "ui/input" ["{}" [":color" ["if" [":done?" "task"] "color/light-green" "color/dark"]]]] ["{}" [":width" ["max" "80" ["+" "20" ["text-width" [":text" "task"] "14" [":font-family" "ui/input"]]]]] [":background-color" "color/white"]]]] [":attrs" ["{}" [":placeholder" "|write task"] [":value" [":text" "task"]] [":autofocus" "true"]]] [":event" ["{}" [":input" ["on-input" "path"]] [":keydown" ["on-keydown" "path"]]]]]] ["comp-space" "|8px" "nil"] ["div" ["{}" [":style" ["merge" "widget/icon" "style-remove"]] [":event" ["{}" [":click" ["on-remove" "path"]]]] [":attrs" ["{}" [":class-name" "|ion-ios-close-empty"]]]]]]]], "recursive-tasks.comp.task/style-remove" ["def" "style-remove" ["let" [["size" "12"]] ["{}" [":width" "size"] [":height" "size"] [":color" "color/red"] [":opacity" "0.5"] [":cursor" "|pointer"] [":border-radius" ["str" ["/" "size" "2"] "|px"]]]]], "recursive-tasks.comp.container/comp-container" ["def" "comp-container" ["create-comp" ":container" "render"]], "recursive-tasks.comp.task-list/style-toolbar" ["def" "style-toolbar" ["{}" [":padding" "|4px 12px"]]], "recursive-tasks.comp.container/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["merge" ["merge" "ui/global" ["{}" [":padding" "16"]]]]]] ["comp-task-list" [":tasks" "store"] ["[]" ":tasks"]] ["--" "comp-debug" "store" ["{}" [":bottom" "0"]]]]]], "recursive-tasks.updater.core/default-handler" ["defn" "default-handler" ["store" "op-data" "op-id"] "store"], "recursive-tasks.updater.core/update-task" ["defn" "update-task" ["store" "op-data" "op-id"] ["let" [[["[]" "path" "content"] "op-data"]] ["update-in" "store" "path" ["fn" ["task"] ["assoc" "task" ":text" "content"]]]]], "recursive-tasks.style.color/gray" ["def" "gray" "|#edacc4"], "recursive-tasks.core/states-ref" ["defonce" "states-ref" ["atom" ["{}"]]], "recursive-tasks.comp.task/on-keydown" ["defn" "on-keydown" ["path"] ["fn" ["e" "dispatch!"] ["let" [["event" [":original-event" "e"]] ["meta-key?" ["or" ["aget" "event" "|metaKey"] ["aget" "event" "|ctrlKey"]]]] ["cond" [["and" "meta-key?" ["=" "38" [":key-code" "e"]]] ["dispatch!" ":move-up" "path"]] [["and" "meta-key?" ["=" "40" [":key-code" "e"]]] ["dispatch!" ":move-down" "path"]] [":else" "nil"]]]]], "recursive-tasks.comp.task/style-task" ["def" "style-task" ["{}" [":padding" "|4px 4px"] [":align-items" "|center"]]], "recursive-tasks.comp.task/on-input" ["defn" "on-input" ["path"] ["fn" ["e" "dispatch!"] ["let" [["content" [":value" "e"]]] ["dispatch!" ":update-task" ["[]" "path" "content"]]]]], "recursive-tasks.style.widget/button" ["def" "button" ["merge" "ui/button" ["{}" [":line-height" "|24px"] [":border-radius" "|4px"] [":font-size" "|12px"] [":background-color" ["hsl" "200" "80" "80"]]]]], "recursive-tasks.comp.task/style-toggler" ["def" "style-toggler" ["{}" [":color" "color/light-green"] [":cursor" "|pointer"] [":font-size" "|16px"]]], "recursive-tasks.core/dispatch!" ["defn" "dispatch!" ["op" "op-data"] ["println" "|dispatch!" "op" "op-data"] ["let" [["op-id" [".valueOf" ["js/Date."]]] ["new-store" ["updater" "@store-ref" "op" "op-data" "op-id"]]] ["reset!" "store-ref" "new-store"]]], "recursive-tasks.comp.task-list/comp-task-list" ["def" "comp-task-list" ["create-comp" ":task-list" "render"]], "recursive-tasks.comp.task/on-remove" ["defn" "on-remove" ["path"] ["fn" ["e" "dispatch!"] ["dispatch!" ":remove-task" "path"]]], "recursive-tasks.updater.core/add-task" ["defn" "add-task" ["store" "op-data" "op-id"] ["let" [["path" "op-data"]] ["update-in" "store" "path" ["fn" ["tasks"] ["conj" "tasks" ["merge" "schema/task" ["{}" [":id" "op-id"]]]]]]]], "recursive-tasks.comp.task-list/on-add" ["defn" "on-add" ["path"] ["fn" ["e" "dispatch!"] ["dispatch!" ":add-task" "path"]]], "recursive-tasks.updater.core/toggle-task" ["defn" "toggle-task" ["store" "op-data" "op-id"] ["let" [["path" "op-data"]] ["update-in" "store" "path" ["fn" ["task"] ["update" "task" ":done?" "not"]]]]], "recursive-tasks.updater.core/move-up" ["defn" "move-up" ["store" "op-data" "op-id"] ["let" [["path" "op-data"]] ["update-in" "store" ["butlast" "path"] ["fn" ["tasks"] ["let" [["position" ["last" "path"]]] ["if" ["pos?" "position"] ["->" "tasks" ["assoc" "position" ["get" "tasks" ["dec" "position"]]] ["assoc" ["dec" "position"] ["get" "tasks" "position"]]] "tasks"]]]]]], "recursive-tasks.comp.task/on-toggle" ["defn" "on-toggle" ["path"] ["fn" ["e" "dispatch!"] ["dispatch!" ":toggle-task" "path"]]], "recursive-tasks.schema/task" ["def" "task" ["{}" [":id" "nil"] [":text" "|"] [":done?" "false"] [":sub-tasks" ["[]"]]]], "recursive-tasks.core/render-app!" ["defn" "render-app!" [] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["render!" ["comp-container" "@store-ref"] "target" "dispatch!" "states-ref"]]], "recursive-tasks.core/-main" ["defn" "-main" [] ["enable-console-print!"] ["render-app!"] ["add-watch" "store-ref" ":changes" "render-app!"] ["add-watch" "states-ref" ":changes" "render-app!"] [".addEventListener" "js/window" "|beforeunload" "save-storage!"] ["println" "|app started!"]], "recursive-tasks.core/store-ref" ["defonce" "store-ref" ["atom" ["let" [["content" [".getItem" "js/localStorage" "cache-key"]]] ["if" ["string?" "content"] ["read-string" "content"] "schema/store"]]]], "recursive-tasks.style.color/light-green" ["def" "light-green" "|#eecec8"], "recursive-tasks.updater.core/remove-task" ["defn" "remove-task" ["store" "op-data" "op-id"] ["let" [["path" "op-data"]] ["update-in" "store" ["butlast" "path"] ["fn" ["tasks"] ["let" [["idx" ["last" "path"]] ["len" ["count" "tasks"]]] ["cond" [["=" "idx" "0"] ["subvec" "tasks" "1"]] [["=" "idx" ["dec" "len"]] ["subvec" "tasks" "0" "idx"]] [":else" ["vec" ["concat" ["subvec" "tasks" "0" "idx"] ["subvec" "tasks" ["inc" "idx"]]]]]]]]]]], "recursive-tasks.comp.task-list/style-list" ["def" "style-list" ["{}" [":border-style" "|solid"] [":border-color" "color/light-green"] [":border-left-width" "1"] [":border-top-width" "0"] [":border-bottom-width" "0"] [":border-right-width" "0"] [":border-radius" "|16px"]]], "recursive-tasks.core/on-jsload" ["defn" "on-jsload" [] ["clear-cache!"] ["render-app!"] ["println" "|code update."]], "recursive-tasks.comp.task/comp-task" ["def" "comp-task" ["create-comp" ":task" "render"]], "recursive-tasks.style.color/red" ["def" "red" "|#dc3148"], "recursive-tasks.style.color/dark" ["def" "dark" "|#7f3065"], "recursive-tasks.schema/store" ["def" "store" ["{}" [":tasks" ["[]"]]]], "recursive-tasks.style.color/white" ["def" "white" ["hsl" "0" "0" "100"]], "recursive-tasks.core/cache-key" ["def" "cache-key" "|recursive-tasks"], "recursive-tasks.core/save-storage!" ["defn" "save-storage!" [] ["let" [["content" ["pr-str" "@store-ref"]]] [".setItem" "js/localStorage" "cache-key" "content"]]], "recursive-tasks.updater.core/move-down" ["defn" "move-down" ["store" "op-data" "op-id"] ["let" [["path" "op-data"] ["position" ["last" "path"]]] ["update-in" "store" ["butlast" "path"] ["fn" ["tasks"] ["if" ["<" "position" ["dec" ["count" "tasks"]]] ["->" "tasks" ["assoc" "position" ["get" "tasks" ["inc" "position"]]] ["assoc" ["inc" "position"] ["get" "tasks" "position"]]] "tasks"]]]]]}, :namespaces {"recursive-tasks.style.color" ["ns" "recursive-tasks.style.color" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]]]], "recursive-tasks.comp.container" ["ns" "recursive-tasks.comp.container" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "recursive-tasks.comp.task-list" ":refer" ["[]" "comp-task-list"]]]], "recursive-tasks.core" ["ns" "recursive-tasks.core" [":require" ["[]" "recursive-tasks.schema" ":as" "schema"] ["[]" "recursive-tasks.updater.core" ":refer" ["[]" "updater"]] ["[]" "recursive-tasks.updater.core" ":refer" ["[]" "updater"]] ["[]" "recursive-tasks.updater.core" ":refer" ["[]" "updater"]] ["[]" "recursive-tasks.updater.core" ":refer" ["[]" "updater"]] ["[]" "respo.core" ":refer" ["[]" "render!" "clear-cache!"]] ["[]" "recursive-tasks.comp.container" ":refer" ["[]" "comp-container"]] ["[]" "cljs.reader" ":refer" ["[]" "read-string"]]]], "recursive-tasks.style.widget" ["ns" "recursive-tasks.style.widget" [":require" ["[]" "respo-ui.style" ":as" "ui"] ["[]" "hsl.core" ":refer" ["[]" "hsl"]]]], "recursive-tasks.schema" ["ns" "recursive-tasks.schema"], "recursive-tasks.updater.core" ["ns" "recursive-tasks.updater.core" [":require" ["[]" "recursive-tasks.schema" ":as" "schema"]]], "recursive-tasks.comp.task-list" ["ns" "recursive-tasks.comp.task-list" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "recursive-tasks.comp.task" ":refer" ["[]" "comp-task"]] ["[]" "recursive-tasks.style.widget" ":as" "widget"] ["[]" "recursive-tasks.style.color" ":as" "color"]]], "recursive-tasks.comp.task" ["ns" "recursive-tasks.comp.task" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "recursive-tasks.style.widget" ":as" "widget"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input" "span"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.util.detect" ":refer" ["[]" "text-width"]] ["[]" "recursive-tasks.style.color" ":as" "color"]]]}, :procedures {"recursive-tasks.core" [["set!" [".-onload" "js/window"] "-main"]], "recursive-tasks.schema" [], "recursive-tasks.comp.task" [], "recursive-tasks.comp.task-list" [], "recursive-tasks.updater.core" [], "recursive-tasks.style.widget" [], "recursive-tasks.util.measure" [], "recursive-tasks.style.color" []}}